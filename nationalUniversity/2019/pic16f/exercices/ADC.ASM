LIST P=16F887
#include <P16F887.inc>

ORG 0
GOTO setup
ORG 4 
GOTO INT
ORG 5
setup			CLRF PORTA				;INICIALIZA PUERTOS Y FLAGS
				CLRF PORTB
				CLRF INTCON
				CLRF PIR1
				BANKSEL ANSELH
				CLRF ANSELH				;PORTA A ANALOG, PORTB DIGITAL
				BANKSEL TRISB
				CLRF TRISB				;RA0 ENTRADA, PORTB SALIDA
				BANKSEL ADCON0
				MOVLW B'11000001'		;ADC ON, OSC RC INT, CH0
				MOVWF ADCON0			
				BANKSEL ADCON1
				CLRF ADCON1				;RES JUSTIFICACION IZQUIERDA, +Vref=VDD, -Vref=VSS
				BANKSEL PIE1
				BSF PIE1, ADIE			;HABILITA INTERRUPCION POR ADC
				BSF INTCON,PEIE			;HABILITA INTERRUPCION POR PERISFERICOS
				BANKSEL PORTA

main			BSF ADCON0,GO			;INICIA CONVERSION
				BSF INTCON,GIE			;HABILITAR LA GLOBAL
				SLEEP					;ESPERAR INTERRUPCION, DISMINUIR RUIDO EN LA CONVERSION
				NOP
				SLEEP					;SI TERMINO PONER PIC EN SLEEP
				NOP
				GOTO main				

INT				MOVF ADRESH,W			;8 BITS MAS SIGNIF. A W
				MOVWF PORTB				;RESULTADO EN PORTB
				BCF PIR1,ADIF			;BAJAR BANDERA DE INTERRUPCION
				RETFIE			
END				
				