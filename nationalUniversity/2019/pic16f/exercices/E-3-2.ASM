errorlevel -203, -205, -302				;DISMINUIR ADVERTENCIAS MOLESTAS
LIST P=16F887
#include <P16F887.inc>
;CONFIG: MCLR OFF, WATCH-GOG OFF, OSCILADOR INTOSCIO, TODO LO DEMAS OFF
__CONFIG _CONFIG1, b'1110000011010100'

;MIENTRAS SE EJECUTA UN PROGRAMA, LA INTERRUPCION SENSA EL ESTADO DE LOS PULSADORES
;EN RA4 Y RB0 Y LOS MUESTRA EN LOS BITS RB2 Y RB3 CORRESPONDIENTEMENTE CADA 60ms

ORG 0
GOTO setup
ORG 4
GOTO INT
ORG 5
setup			CLRF PORTA				;INICIALIZACIONES
				CLRF PORTB
				BANKSEL ANSEL			;PORTA Y B A DIGITAL
				CLRF ANSEL
				CLRF ANSELH
				BANKSEL TRISB			;RA4, RB0 ENTRADAS Y RB2,RB3 SALIDAS 
				CLRF TRISB
				BSF TRISB,TRISB0
				BANKSEL T2CON			
				CALL TMR2_setup			;CONFIGURACION DEL TMR2 PARA 60ms aprox
				BANKSEL PORTA
				BSF INTCON,PEIE			;HABILITA INTERRUPCIONES POR PERISFERICOS Y GLOBAL
				BSF INTCON,GIE
				BSF T2CON,TMR2ON		;COMIENZA A CONTAR EL TMR2

main			GOTO $					;ALGO

INT				BCF T2CON,TMR2ON		;APAGA EL TMR2
				BTFSC PORTA,RA4			;SENSA ESTADO LOGICO EN RA4, Y LO MUESTRA EN RB2
				BSF PORTB,RB2
				BTFSS PORTA,RA4
				BCF PORTB,RB2
				BTFSC PORTB,RB0			;ESTADO LOGICO EN RB0 A RB3
				BSF PORTB,RB3
				BTFSS PORTB,RB0
				BCF PORTB,RB3
				BCF PIR1,TMR2IF			;BAJA BANDERAS Y ENCIENDE TMR2 NUEVAMENTE
				BSF T2CON,TMR2ON
				RETFIE

;---------------CONFIGURACIONES-----------------------------------------------------------
TMR2_setup		COMF T2CON,F			;TMR2: PS=16, ps=16, OFF
				BCF T2CON,TMR2ON
				BCF PIR1,TMR2IF			;LIMPIA BANDERA DEL TMR2, Y ACTIVA SU INTERRUPCION
				CLRF TMR2
				BANKSEL PIE1
				BSF PIE1,TMR2IE
				RETURN
END
				

				
				