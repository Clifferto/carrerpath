Version 4
SHEET 1 1684 1668
WIRE -848 -288 -848 -304
WIRE -752 -288 -752 -304
WIRE -960 -272 -960 -304
WIRE -960 -240 -960 -272
WIRE -848 -240 -848 -288
WIRE -752 -240 -752 -288
WIRE -960 -96 -960 -160
WIRE -848 -96 -848 -160
WIRE -752 -96 -752 -160
WIRE 32 384 -16 384
WIRE 320 384 96 384
WIRE -432 432 -736 432
WIRE -288 432 -352 432
WIRE 192 480 144 480
WIRE 320 480 320 384
WIRE 320 480 272 480
WIRE 544 496 496 496
WIRE 672 496 624 496
WIRE -400 544 -400 528
WIRE -400 560 -400 544
WIRE 208 560 208 544
WIRE -896 576 -912 576
WIRE -864 576 -896 576
WIRE -736 576 -736 432
WIRE -736 576 -784 576
WIRE -704 576 -736 576
WIRE -592 576 -640 576
WIRE -432 576 -592 576
WIRE 208 576 208 560
WIRE 560 576 560 560
WIRE -288 592 -288 432
WIRE -288 592 -368 592
WIRE -160 592 -288 592
WIRE -16 592 -16 384
WIRE -16 592 -80 592
WIRE 32 592 -16 592
WIRE 144 592 144 480
WIRE 144 592 96 592
WIRE 176 592 144 592
WIRE 560 592 560 576
WIRE -432 608 -480 608
WIRE 320 608 320 480
WIRE 320 608 240 608
WIRE 368 608 320 608
WIRE 496 608 496 496
WIRE 496 608 448 608
WIRE 528 608 496 608
WIRE -736 624 -736 576
WIRE -592 624 -592 576
WIRE 176 624 144 624
WIRE 672 624 672 496
WIRE 672 624 592 624
WIRE 720 624 672 624
WIRE 752 624 720 624
WIRE -400 640 -400 624
WIRE 528 640 496 640
WIRE -400 656 -400 640
WIRE 208 656 208 640
WIRE 208 672 208 656
WIRE 560 672 560 656
WIRE 560 688 560 672
WIRE -480 720 -480 608
WIRE -448 720 -480 720
WIRE -288 720 -288 592
WIRE -288 720 -368 720
WIRE -480 752 -480 720
WIRE 144 752 144 624
WIRE -736 768 -736 688
WIRE -592 768 -592 704
WIRE 496 768 496 640
WIRE -480 880 -480 832
WIRE -288 1248 -288 1216
WIRE -288 1280 -288 1248
WIRE -288 1408 -288 1360
FLAG -400 640 vcc
FLAG -400 544 vss
FLAG -960 -96 0
FLAG -752 -96 0
FLAG -848 -96 0
FLAG -848 -288 vcc
FLAG -752 -288 vss
FLAG -960 -272 in
FLAG -480 880 0
FLAG -592 768 0
FLAG -736 768 0
FLAG -896 576 in
FLAG -288 1408 0
FLAG -288 1248 lapl
FLAG 208 560 vcc
FLAG 208 656 vss
FLAG 144 752 0
FLAG 720 624 vo
FLAG 560 576 vcc
FLAG 560 672 vss
FLAG 496 768 0
SYMBOL OpAmps\\UniversalOpamp -400 592 M180
SYMATTR InstName U1
SYMBOL res -768 560 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value {mc(r11,var1)}
SYMBOL res -336 416 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value {mc(r12,var1)}
SYMBOL voltage -960 -256 M0
WINDOW 123 24 124 Left 2
WINDOW 39 0 0 Left 0
SYMATTR Value2 AC 1
SYMATTR InstName V1
SYMATTR Value SINE(0 1 {fin})
SYMBOL voltage -752 -256 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value {-src}
SYMBOL voltage -848 -256 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value {src}
SYMBOL cap -720 688 R180
WINDOW 0 24 56 Left 2
WINDOW 3 24 8 Left 2
SYMATTR InstName C1
SYMATTR Value {mc(c11,var1)}
SYMBOL cap -640 560 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C2
SYMATTR Value {mc(c12,var1)}
SYMBOL res -576 720 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R3
SYMATTR Value {mc(r13,var1)}
SYMBOL res -464 848 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R4
SYMATTR Value {rk11}
SYMBOL res -464 736 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R5
SYMATTR Value {rk12}
SYMBOL bv -288 1264 R0
SYMATTR InstName B2
SYMATTR Value V=V(in) LAPLACE={((s*k1)/(s**2+a1*s+b1))*((s*k2)/(s**2+a2*s+b2))}
SYMBOL OpAmps\\UniversalOpamp 208 608 R0
SYMATTR InstName U3
SYMBOL res -64 576 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R13
SYMATTR Value {mc(r21,var2)}
SYMBOL res 288 464 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R14
SYMATTR Value {mc(r22,var2)}
SYMBOL cap 96 576 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C5
SYMATTR Value {mc(c21,var2)}
SYMBOL cap 96 368 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C6
SYMATTR Value {mc(c22,var2)}
SYMBOL OpAmps\\UniversalOpamp 560 624 R0
SYMATTR InstName U2
SYMBOL res 464 592 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value {mc(r31,var3)}
SYMBOL res 640 480 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7
SYMATTR Value {mc(r32,var3)}
TEXT -1040 1040 Left 2 !.ac dec 100 100 10k
TEXT -992 264 Left 2 !.param rk11=1k rk12=2k2+720/3 \n.param r11=1k5+220+18 r12=1k5+220+18 r13=1k5+220+18\n.param c11=100n c12=100n
TEXT -1088 -384 Left 2 !.param src=12 fin=1k dcy=.5 trf=1p
TEXT -144 1192 Left 2 !** requisitos\n.param k1=5252.26 a1=3184.42 b1=66320656\n.param k2=3126.49 a2=1895.58 b2=23500096
TEXT -40 264 Left 2 !.param r21=820/2 r22=10k+560 \n.param c21=100n c22=100n
TEXT -1008 184 Left 6 ;FT1: Pos Feedback
TEXT -152 184 Left 6 ;FT2: Neg Feedback
TEXT 424 416 Left 2 !.param r31=100k r32=3k3+150
TEXT -232 936 Left 2 !.param var1=0.01 var2=0.1 var3=0\n.step param run 0 100 1
TEXT -304 1032 Left 2 !.meas AC averag AVG V(vo) FROM 800 TO 1250
